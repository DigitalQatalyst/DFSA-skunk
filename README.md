# Magic Patterns - Vite Template

This code was generated by [Magic Patterns](https://magicpatterns.com) for this design: [Source Design](https://www.magicpatterns.com/c/8j94agdyu7oed5hr7zqw47)

## Getting Started

1. Run `npm install`
2. Start the local API and Vite together: `npm run dev:all`

Notes
- The local Node API server at `api/server.mjs` listens on `:3001`. Vite serves the frontend on `:3000` and proxies `/api/*` to `:3001`.
- Avoid `vercel dev` for this project; it can race `/api/*` and produce libuv assertion errors. Use `npm run dev:all` instead.

## Auth Pattern

- See `docs/auth-config-pattern.md` for the MSAL-based authentication configuration pattern, env variables, and integration details....

## Dual Supabase Setup

- Default Supabase: used by all nonâ€“Knowledge Hub features. Existing env vars remain unchanged (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`).
- Knowledge Hub Supabase: isolated project used by Knowledge Hub (grid, details, admin forms, RPCs, storage).
  - Browser envs: `NEXT_PUBLIC_SUPABASE_URL_KH`, `NEXT_PUBLIC_SUPABASE_ANON_KEY_KH` (or `VITE_*` equivalents).
  - Optional storage override: `NEXT_PUBLIC_SUPABASE_KH_BUCKET_THUMBNAILS`.
  - Server-only: `SUPABASE_SERVICE_ROLE_KEY_KH` for Edge/admin scripts (never expose to browser).

Code entry points
- Default client: unchanged imports continue to work.
- Knowledge Hub client: `import { getSupabaseKnowledgeHub } from 'src/lib/supabase'`.

Verification
- Non-KH pages should hit only the default Supabase URL in the network panel.
- KH pages (marketplace Knowledge Hub grid/details, Admin UI) should hit only the KH Supabase URL.


### trigger deployment
